<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Products</title>
</head>
<body>
<header>
    <h1>Product Catalog (Java Web 8)</h1>
    <div sec:authorize="!isAuthenticated()">
        Welcome Guest, <a th:href="@{/login}">Login</a>
    </div>
    <div sec:authorize="isAuthenticated()">
        Welcome <span sec:authentication="name"></span>, <a th:href="@{/logout}">Logout</a>
    </div>
</header>
<a th:href="@{/products/add}" sec:authorize="hasRole('SuperAdmin')">Insert Product</a>
<table style="width:100%">
    <tr>
        <th align="left">Code</th>
        <th align="left">Name</th>
        <th align="left">Description</th>
        <th align="left">Buy Price</th>
        <th align="left">Sell Price</th>
        <th align="left">Qty</th>
        <th align="left" sec:authorize="hasRole('SuperAdmin')">Actions</th>
    </tr>
    <!--/*@thymesVar id="productList" type="java.util.List<io.gitlab.markcrowe.furniture.shop.app.model.Product>"*/-->
    <tr th:each="product: ${productList}">
        <td><span th:text="${product.code}"></span></td>
        <td><span th:text="${product.name}"></span></td>
        <td><span th:text="${product.description}"></span></td>
        <td><span th:text="${product.buyPrice}"></span></td>
        <td><span th:text="${product.sellPrice}"></span></td>
        <td><span th:text="${product.quantityInStock}"></span></td>
        <td sec:authorize="hasAnyRole('Admin', 'SuperAdmin')"><a th:href="@{/products/{code}/delete(code=${product.code})}">Delete</a></td>
    </tr>
</table>
</body>
</html>